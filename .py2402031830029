from PIL import Image, ImageDraw, ImageFont

def add_watermark(input_image_path, output_image_path, watermark_text):
    # Load image
    original = Image.open(input_image_path).convert("RGBA")

    # Create a new blank image with transparent background
    watermark = Image.new("RGBA", original.size, (0, 0, 0, 0))

    # Prepare to draw on watermark
    draw = ImageDraw.Draw(watermark)

    # Load a font
    font = ImageFont.truetype("arial.ttf", 40)  # Make sure arial.ttf exists

    # Set position for watermark (bottom-right corner)
    text_width, text_height = draw.textsize(watermark_text, font)
    width, height = original.size
    x = width - text_width - 10
    y = height - text_height - 10

    # Add text to watermark image with transparency
    draw.text((x, y), watermark_text, font=font, fill=(255, 255, 255, 128))

    # Combine original with watermark
    watermarked = Image.alpha_composite(original, watermark)

    # Save final image
    watermarked.convert("RGB").save(output_image_path, "JPEG")
    print(f"Watermark added and saved to {output_image_path}")

# Example usage
add_watermark("input.jpg", "output.jpg", "Â© YourName")
